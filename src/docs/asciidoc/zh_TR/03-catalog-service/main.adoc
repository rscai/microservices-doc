= Catalog Service
:icons: font
ifndef::imagesdir[:imagesdir: images]

== 目標
本章中，我們將基於Spring Boot開發提供RESTful API的Catalog微服務。我們將學習：

* 使用Lombok在編譯器生成Getter和Setter訪問器，減少模板代碼
* 使用Spring Data/Spring Data MongoDB訪問MongoDB
* 使用Spring Data REST從Repository構建RESTful API
* 使用Spring Test/MockMVC測試RESTFul API
* 使用Spring REST Docs生成簡潔、準確且結構良好的RESTFul API文檔

== 特性

Catalog微服務負責維護Product和ProductImage兩個業務模型實體。

[plantuml, catalog-model, png]
....
@startuml
class Product <<Entity>> {
    -id: String
    -title: String
    -tags: List<String>
    -images: List<ProductImage>
    -createdAt: Date
    -updatedAt: Date
}

class ProductImage <<Entity>> {
    -id: String
    -src: String
    -createdAt: Date
    -updatedAt: Date
}

Product "0..1" *- "1..*" ProductImage: images
@enduml
....

* Product，可被獨立增刪改查的業務實體，其可關聯一至多個ProductImage
* ProductImage，可被獨立增刪改查的業務實體，其可被零至一個Product關聯。如若關聯其的Product被移除，不會影嚮ProductImage實體的狀態。

Catalog微服務需支持特性：

. 創建新的ProductImage
. 更新ProductImage
. 移除ProductImage
. 分頁查詢所有ProductImage
. 讀取單個ProductImage
. 創建新的Product
. 更新Product
. 移除Product
. 分頁查詢所有ProductImage
. 讀取單個Product

:leveloffset: 1

include::design.adoc[]
include::implementation.adoc[]

:leveloffset: 0

== 參考

. https://docs.spring.io/spring-data/commons/docs/current/reference/html/[Spring Data Commons - Reference Documentation]
. https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/[Spring Data MongoDB - Reference Documentation]
. https://docs.spring.io/spring-data/rest/docs/current/reference/html/[Spring Data REST Reference Guide]